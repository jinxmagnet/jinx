import{_ as s,o as i,c as a,R as n}from"./chunks/framework.gdc2w2R7.js";const F=JSON.parse('{"title":"查询模块是否安装","description":"","frontmatter":{"author":"coder-li","tags":"nginx连接状态模块 nginx/modules/stub_status_module","aliases":"连接状态"},"headers":[],"relativePath":"articles/backend/nginx/基础知识/1.连接状态模块.md","filePath":"articles/backend/nginx/基础知识/1.连接状态模块.md","lastUpdated":1703471746000}'),t={name:"articles/backend/nginx/基础知识/1.连接状态模块.md"},e=n(`<p>nginx有一个模块页面，统计当前有多人用户访问连接</p><h1 id="查询模块是否安装" tabindex="-1">查询模块是否安装 <a class="header-anchor" href="#查询模块是否安装" aria-label="Permalink to &quot;查询模块是否安装&quot;">​</a></h1><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> 2&gt;&amp;1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stub_status</span></span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/lijing-2008/PicGo/img/20220112125752.png" alt=""></p><h1 id="配置状态模块" tabindex="-1">配置状态模块 <a class="header-anchor" href="#配置状态模块" aria-label="Permalink to &quot;配置状态模块&quot;">​</a></h1><p>配置在server块中</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># lj.conf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">server:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /nginx_status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		stub_status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		allow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> all</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h1 id="访问连接状态模块" tabindex="-1">访问连接状态模块 <a class="header-anchor" href="#访问连接状态模块" aria-label="Permalink to &quot;访问连接状态模块&quot;">​</a></h1><p><code>/nginx_status</code><img src="https://cdn.jsdelivr.net/gh/lijing-2008/PicGo/img/20220112130212.png" alt=""></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Active</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> connections:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #活跃的连接数 </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> accepts</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> handled</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> requests</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #服务器接收处理请求</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 7</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #①总连接数-②成功连接数-③请求数(如果一个请求文件中还包含多个请求文件可能一次请求会连带多个请求数)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Reading:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Writing:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Waiting:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #Reading读取客户端Header的信息数 请求头</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #Writing返回给客户端的header的信息数 响应头</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #Waiting等待的请求数，开启了Keepalive</span></span></code></pre></div><p>关于连接 [[网络]] [[tcp三次握手]] [[Tcp四次挥手]]</p><blockquote><p>简单讲 ===连接对应于tcp，请求对应于http===</p></blockquote><h2 id="连接" tabindex="-1">连接 <a class="header-anchor" href="#连接" aria-label="Permalink to &quot;连接&quot;">​</a></h2><p>指的是[[tcp三次握手]]，</p><h2 id="请求" tabindex="-1">请求 <a class="header-anchor" href="#请求" aria-label="Permalink to &quot;请求&quot;">​</a></h2><p>指的是[[http请求]]</p><h2 id="keepalive设置" tabindex="-1">keepalive设置 <a class="header-anchor" href="#keepalive设置" aria-label="Permalink to &quot;keepalive设置&quot;">​</a></h2><p>===长连接设置=== 设置server块中的keepalive_timeout值 ![[nginx主配置文件#③ HTTP模块]] <code>keepalive</code>指的是访问一个服务器之后，将会保持一定时间的连接，如果超过了这个时间没有进行任何请求操作，那么将会断开连接，下次访问将重新进行[[tcp三次握手]]建立连接。如上默认为65s 例如，将keepalive_timeout设为3，则每过3s，如果没任何操作则需要重新建立连接</p>`,18),l=[e];function h(p,k,r,d,c,o){return i(),a("div",null,l)}const u=s(t,[["render",h]]);export{F as __pageData,u as default};
